<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Table Editor</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"/>
</head>
<body>
  <div class="container">
    <div id='tableContainer' class="card">


    </div>

  </div>
</body>

  <script src="pbTableEditor.js"></script>
 
  <script src="collections.js"></script>
  
  <script>
   
   // Sample data
  
   //*
    const collection = 
    {
        "name": "spaces",
        "schema": [
            { "name": "person", "type": "text" },
            { "name": "spacename", "type": "text" },
            { "name": "desc", "type": "editor" }
        ]
        
    }

   const records = [
        { "id": "111", "spacename": "Space 1" ,"person": "Pran","desc":"villain"},
        { "id": "222", "spacename": "Space 2" ,"person": "Mehmood","desc":"comedian"},
        { "id": "333", "spacename": "Space 3" ,"person": "Raj Kapoor","desc":"hero"},
        { "id": "444", "spacename": "Space 4" ,"person": "Sreedevi","desc":"heroine"}
        
    ]
  //*/

   
  /*
   //Use this if you include the Pocketbase schema in collections.js

   let collection = collections[11]; 
   let records = [];
  //*/

  function getRecords(collectionName){
          //Fetch the current list of Pocketbase collection records
           console.log('Fetching records of '+collectionName)
           return records 
    
     }

   //This is defined in pbTableEditor.js  
   generateEditorTable(collection,
        'tableContainer',
         getRecords, //function pointer to the function that gets collection records
        function(collName,Id){ alert('A record is deleted from '+collName)}, //function pointer to delete one record
        function(collName,Obj){alert('An object is added to '+collName)}, //function pointer to create record
        function(collName,Obj){alert('An object is updated in '+collName)}, //function pointer to update record 
        function(collName,ArrayOfIds){alert('Some records are deleted from '+collName)}, //function pointer to multiple deletes 

            //Object that expands 'relations' type fields
            { "nurseoncall": [
                  {
                    "id":"abcedfg",
                    "text":"Srilatha"
                  }  
                ],
               "attendedby": [
                  {  "id":"xyzlmnop",
                    "text":"Sreejith"

                  }
               ],
               "patient":[
                  {
                    "id":"uvwxyzrst",
                    "text":"Nikesh"
                  }
               ] 

            }

            );

  </script>
</html>